language: cpp
os:
  - linux
compiler:
  - gcc
sudo: required
dist: trusty
install:
  - sudo add-apt-repository -y ppa:beineri/opt-qt551-trusty
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get -qq update
  - sudo apt-get -qq install catch
  - sudo apt-get -qq install libarmadillo-dev
  - sudo apt-get -qq install libboost-all-dev
  - sudo apt-get -qq install libhdf5-dev
  - sudo apt-get -qq install qt55declarative
  - sudo apt-get -qq install qt55qbs
  - sudo apt-get -qq install libboost-dev
  - sudo apt-get -qq install gcc-5
  - sudo apt-get -qq install g++-5
script:
  - dpkg -L g++-5
  - source /opt/qt55/bin/qt55-env.sh
     && mkdir build
     && cd build
     && /opt/qt55/bin/qbs setup-toolchains --type g++ /usr/bin/g++-5 g++
     && /opt/qt55/bin/qbs setup-qt /opt/qt55/bin/qmake qt5
     && /opt/qt55/bin/qbs build -f ../photonflow.qbs photonflow-app.hdf5LibraryName:hdf5 profile:qt5 release
     && cd qt5-release
     && cd auto-tests*
     && ./auto-tests
